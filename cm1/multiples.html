<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>D√©fi Multipli'Monstres</title>
  <style>
    body { font-family: Arial, sans-serif; background-color: #f0f0f8; text-align: center; padding: 20px; }
    #game { margin-top: 20px; }
    #question { font-size: 24px; margin: 20px 0; }
    .btn { padding: 10px 20px; margin: 5px; font-size: 18px; cursor: pointer; }
    .level-btn { margin: 10px; }
    .hidden { display: none; }
    #result { font-size: 20px; margin: 10px 0; }
    #final-score { font-size: 22px; margin: 20px 0; font-weight: bold; }
    .stars { font-size: 26px; color: gold; }
  </style>
</head>
<body>
  <h1>üéØ D√©fi Multipli'Monstres</h1>
  <p>Choisis ton niveau de difficult√© :</p>
  <div id="level-select">
    <button class="btn level-btn" onclick="startGame(2, 5)">Niveau 1 : x2 √† x5</button>
    <button class="btn level-btn" onclick="startGame(6, 7)">Niveau 2 : x6 √† x7</button>
    <button class="btn level-btn" onclick="startGame(8, 10)">Niveau 3 : x8 √† x10</button>
  </div>

  <div id="game" class="hidden">
    <div id="question"></div>
    <div id="answers"></div>
    <div id="result"></div>
    <button class="btn" id="next-btn" onclick="nextQuestion()">Question suivante</button>
    <div id="final-score" class="hidden"></div>
    <div id="star-rating" class="stars hidden"></div>
    <button class="btn hidden" id="restart-btn" onclick="goToHome()">Retour √† l'accueil</button>
  </div>

  <script>
    let minTable = 2;
    let maxTable = 5;
    let currentAnswer = 0;
    let score = 0;
    let questionCount = 0;
    const maxQuestions = 20;

    function startGame(min, max) {
      minTable = min;
      maxTable = max;
      score = 0;
      questionCount = 0;
      document.getElementById('level-select').classList.add('hidden');
      document.getElementById('game').classList.remove('hidden');
      document.getElementById('final-score').classList.add('hidden');
      document.getElementById('restart-btn').classList.add('hidden');
      document.getElementById('next-btn').classList.remove('hidden');
      document.getElementById('star-rating').classList.add('hidden');
      nextQuestion();
    }

    function nextQuestion() {
      if (questionCount >= maxQuestions) {
        endGame();
        return;
      }

      questionCount++;
      let a = Math.floor(Math.random() * (maxTable - minTable + 1)) + minTable;
      let b = Math.floor(Math.random() * 10) + 1;
      currentAnswer = a * b;
      document.getElementById('question').textContent = `Question ${questionCount}/${maxQuestions} : Combien font ${a} √ó ${b} ?`;
      generateAnswers(currentAnswer);
      document.getElementById('result').textContent = "";
    }

    function generateAnswers(correct) {
      const container = document.getElementById('answers');
      container.innerHTML = '';
      let answers = new Set([correct]);

      while (answers.size < 4) {
        let delta = Math.floor(Math.random() * 10) + 1;
        let wrongAnswer = Math.random() < 0.5 ? correct + delta : correct - delta;
        if (wrongAnswer > 0) answers.add(wrongAnswer);
      }

      const shuffledAnswers = Array.from(answers).sort(() => Math.random() - 0.5);

      shuffledAnswers.forEach(value => {
        let btn = document.createElement('button');
        btn.textContent = value;
        btn.className = 'btn';
        btn.onclick = () => checkAnswer(value);
        container.appendChild(btn);
      });
    }

    function checkAnswer(value) {
      const result = document.getElementById('result');
      if (value === currentAnswer) {
        result.textContent = "‚úÖ Bravo !";
        score++;
      } else {
        result.textContent = `‚ùå Mauvaise r√©ponse. C'√©tait ${currentAnswer}.`;
      }
    }

    function getStarRating(score) {
      if (score <= 2) return '‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ';
      if (score <= 4) return '‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ';
      if (score <= 6) return '‚òÖ¬Ω‚òÜ‚òÜ‚òÜ';
      if (score <= 8) return '‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ';
      if (score <= 10) return '‚òÖ‚òÖ¬Ω‚òÜ‚òÜ';
      if (score <= 12) return '‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ';
      if (score <= 14) return '‚òÖ‚òÖ‚òÖ¬Ω‚òÜ';
      if (score <= 16) return '‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ';
      if (score <= 18) return '‚òÖ‚òÖ‚òÖ‚òÖ¬Ω';
      return '‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ';
    }

    function endGame() {
      document.getElementById('question').textContent = "üéâ Fin du jeu !";
      document.getElementById('answers').innerHTML = '';
      document.getElementById('next-btn').classList.add('hidden');
      document.getElementById('result').textContent = "";
      document.getElementById('final-score').textContent = `Tu as obtenu ${score} bonnes r√©ponses sur ${maxQuestions} !`;
      document.getElementById('final-score').classList.remove('hidden');
      document.getElementById('restart-btn').classList.remove('hidden');
      document.getElementById('star-rating').textContent = getStarRating(score);
      document.getElementById('star-rating').classList.remove('hidden');
    }

    function goToHome() {
      document.getElementById('game').classList.add('hidden');
      document.getElementById('level-select').classList.remove('hidden');
      document.getElementById('next-btn').classList.remove('hidden');
    }
  </script>
</body>
</html>
